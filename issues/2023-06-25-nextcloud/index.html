<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="We are releasing a new version of our Nextcloud image that is built with the Nextcloud application inside the image, rather than in the user /config volume. This means manually updating Nextcloud via command line will no longer be necessary or supported. The updater.phar command is completely removed. Installations for existing users will be migrated automatically when updating the container image. All future updates to your Nextcloud instance will happen via container image updates."><title>Notification: Changes to our Nextcloud image | Info :: LinuxServer.io</title><link rel=canonical href=https://info.linuxserver.io/issues/2023-06-25-nextcloud/><link rel=alternate type=application/json href=https://info.linuxserver.io/issues/2023-06-25-nextcloud/index.json title="Info :: LinuxServer.io"><meta name=generator content="cState v5.6.1 - https://github.com/cstate/cstate"><meta name=theme-color content="#0a0c0f"><script>var themeBrandColor='#0a0c0f',themeOkColor='#008000',themeNoticeColor='#24478f',themeDisruptedColor='#cc4400',themeDownColor='#e60000'</script><style>html,body{margin:0;background:#fff;color:#4d4d4d;font:100%/1.5 inter,inter ui,BlinkMacSystemFont,-apple-system,san francisco text,roboto,segoe ui,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,.25)}::selection{background:#b4d5ff}*,*:before,*:after{box-sizing:inherit}a{text-decoration:none;color:#000;border-bottom:1px dotted}a:hover{border-bottom-style:solid}a:active{position:relative;top:2px}hr{border:0;border-bottom:1px solid #ccc;margin:24px 0}h1{font-size:40px;line-height:1}h2{font-size:26px}h3{font-size:20px}h4{font-size:18px}h1,h2,h4{font-weight:400;color:#000;font-family:inter,inter ui,segoe ui,BlinkMacSystemFont,-apple-system,san francisco display,roboto,Helvetica,Arial,sans-serif,apple color emoji,segoe ui emoji,segoe ui symbol;letter-spacing:-.4px;overflow-wrap:break-word}h3{margin:0;color:#000}img{border:0;width:100%;height:auto}.hidden{display:none}a.no-underline{border-bottom:0}.headline{font-size:20px}.bold{color:#000}.hinted{color:#6d6d6d}.faded{color:#6d6d6d}.clean{margin:0}.ok{color:green}.warning{color:#c40}.error{color:#e60000}.contain{max-width:640px;margin:16px auto;padding:16px}.markdown pre{overflow-x:scroll}.contain--more{max-width:680px}.center{text-align:center}.right{text-align:right}.padding-s{padding:6px}.padding{padding:12px}.clicky{cursor:pointer}.link-style{border:none}.span-icon{float:right;margin-left:16px}.js .category--open .category__closed-marker{display:none}.js .category--closed .components{display:none}.js .category--closed .category__open-marker{display:none}.js .hidden-with-js{display:none}.hide-without-js{display:none}.js span.hide-without-js{display:inline}.js div.hide-without-js{display:block}.date{display:block;margin-top:12px;color:#666;font-variant:small-caps}.tag{display:inline-block;padding:4px 8px;margin-right:4px;margin-bottom:2px;background:#eee}.tag:hover{background:#ddd}.header{padding:8px 0;background:#0a0c0f}.header a{color:#fff;font-size:14px;font-variant:small-caps}.header a h1{color:#fff}.header__logo img{height:auto;width:320px}.header__logo--small img{height:auto;width:160px}.header--large{padding:16px}.header--large a{font-size:20px}.footer{padding:10px;background:#f5f5f5}.footer__copyright{display:block;font-variant:small-caps}.footer__copyright a,a.header__logo{border-bottom:0}.summary{padding:16px;color:#fff}.summary__date:hover{color:#ccc}.summary__date:hover:after{content:' ⟳ ';color:#fff}.components{border:2px solid #ddd;border-bottom:0}.component{color:#000;padding:16px;border-bottom:2px solid #ddd}.tooltip{cursor:pointer;position:relative}.tooltip__text{display:none}.tooltip:hover .tooltip__text,.tooltip:active .tooltip__text{display:block;position:absolute;top:0;left:24px;background:#181818;color:#fff;z-index:50;padding:8px;border:2px solid #242424;font-size:14px;color:#ccc;width:320px;height:auto}@media(max-width:640px){.tooltip:hover .tooltip__text,.tooltip:active .tooltip__text{width:50vw}}.tabs{border-bottom:1px solid #ccc}.tabs--inner{padding:0 16px;margin:0 auto}a.tab{display:inline-table}.tab--current{border:1px solid #ccc;border-bottom-color:#fff;padding:12px 18px;position:relative;top:1px}.tab--other{border:0;padding:12px 18px;position:relative;top:1px;color:#757575}.tab--other:hover{color:#000}.issue{display:block;padding:14px 24px}.issue:hover,.category__head:hover{background:#f5f5f5}.issue:active,.category__head:active{background:#eee}.issue h3{line-height:1.25}.category__head{margin-top:20px}.archive__head{padding:20px;background:#f5f5f5}.status-ok .summary{background:green}.status-disrupted .summary,.change-header-color.status-disrupted .header{background:#c40}.status-down .summary,.change-header-color.status-down .header{background:#e60000}.status-notice .summary,.change-header-color.status-notice .header{background:#24478f}.announcement-box .padding{padding:16px}.status-disrupted .announcement-box{border:2px solid #c40}.status-down .announcement-box{border:2px solid #e60000}.status-notice .announcement-box{border:2px solid #24478f}.status-disrupted .announcement-box,.status-down .announcement-box,.status-notice .announcement-box{border-top:0}.category--open .category-status{display:none}.component-status,.category-status{float:right}.component[data-status=ok] .component-status,.category__head[data-status=ok] .category-status{color:green}.component[data-status=disrupted] .component-status,.category__head[data-status=disrupted] .category-status{color:#c40}.component[data-status=notice] .component-status,.category__head[data-status=notice] .category-status{color:#24478f}.component[data-status=down] .component-status,.category__head[data-status=down] .category-status{color:#e60000}@media(min-width:640px){.float-right{float:right;display:inline}}@media(prefers-color-scheme:dark){html,body{background:#181a1b;color:#ccc9c1}h1,h2,h3,h4,a,.bold{color:#fafafa}hr{border-bottom-color:#3d3d3d}.footer{background:#1b1d1e}.components{border:2px solid #ddd;border-bottom:0;border-color:#3a3a3a}.component{border-bottom:2px solid #ddd;color:#e8e6e3;border-bottom-color:#3a3a3a}.tabs{border-bottom-color:#3d3d3d}.tab--current{border-color:#3d3d3d;border-bottom-color:#181a1b}.tab--other{color:#757575}.tab--other:hover{color:#fff}.date{color:#c3bfb6}.tag,.archive__head{background-color:#1d1f20}.tag:hover{background:#222}.issue:hover,.category__head:hover{background-color:#212121}.hinted,.faded{color:#c1bcb3}.error{color:#ff4242}.warning{color:#ffde7f}.ok{color:#7fff7f}.component[data-status=ok] .component-status,.category__head[data-status=ok] .category-status{color:#7fff7f}.component[data-status=disrupted] .component-status,.category__head[data-status=disrupted] .category-status{color:#ffde7f}.component[data-status=notice] .component-status,.category__head[data-status=notice] .category-status{color:#83a4e8}.component[data-status=down] .component-status,.category__head[data-status=down] .category-status{color:#ff8181}}</style><style>.pre-header-links{background-color:#0a0c0f;text-align:right;padding-right:10px}.pre-header-links a{border-bottom:none;color:#fff}</style><meta property="og:url" content="https://info.linuxserver.io/issues/2023-06-25-nextcloud/"><meta property="og:type" content="website"><meta property="og:title" content="Notification: Changes to our Nextcloud image | Info :: LinuxServer.io"><meta property="og:description" content="We are releasing a new version of our Nextcloud image that is built with the Nextcloud application inside the image, rather than in the user /config volume. This means manually updating Nextcloud via command line will no longer be necessary or supported. The updater.phar command is completely removed. Installations for existing users will be migrated automatically when updating the container image. All future updates to your Nextcloud instance will happen via container image updates."><meta property="og:image" content="https://info.linuxserver.io/logo.png"><meta name=twitter:card content="summary_large_image"><meta property="twitter:domain" content="info.linuxserver.io"><meta property="twitter:url" content="https://info.linuxserver.io/issues/2023-06-25-nextcloud/"><meta name=twitter:title content="Notification: Changes to our Nextcloud image | Info :: LinuxServer.io"><meta name=twitter:description content="We are releasing a new version of our Nextcloud image that is built with the Nextcloud application inside the image, rather than in the user /config volume. This means manually updating Nextcloud via command line will no longer be necessary or supported. The updater.phar command is completely removed. Installations for existing users will be migrated automatically when updating the container image. All future updates to your Nextcloud instance will happen via container image updates."><meta name=twitter:image content="https://info.linuxserver.io/logo.png"></head><body class="issues single"><div class=contain><a href=https://info.linuxserver.io>← Go back to <em>Info :: LinuxServer.io</em></a></div><div class=contain><div class=article><h1 class=clean>Notification: Changes to our Nextcloud image</h1><small class=date>June 25, 2023 at 10:00 PM</small><p><small><a href=/affected/notifications/ class="tag no-underline">Notifications</a>
<a href=/affected/nextcloud/ class="tag no-underline">nextcloud</a></small></p><hr><div class=markdown><p>We are releasing a new version of our <a href=https://github.com/linuxserver/docker-nextcloud/>Nextcloud image</a> that is built with the Nextcloud application inside the image, rather than in the user <code>/config</code> volume. This means manually updating Nextcloud via command line will no longer be necessary or supported. The <code>updater.phar</code> command is completely removed. Installations for existing users will be migrated automatically when updating the container image. All future updates to your Nextcloud instance will happen via container image updates.</p><p><strong>Updating via the admin web UI is no longer supported.</strong></p><p><strong>Downgrading is not supported.</strong></p><p>An important thing to keep in mind is that systems that automatically update your container will result in irreversible changes to your Nextcloud instance. We recommend pinning a specific tagged version like <code>lscr.io/linuxserver/nextcloud:version-27.0.0</code> and manually changing your image version when you are ready to upgrade.</p><p>Excerpts from the updated README:</p><h3 id=updating-nextcloud>Updating Nextcloud</h3><p>Updating Nextcloud is done by pulling the new image, and recreating the container with it.</p><p>It is only possible to upgrade one major version at a time. For example, if you want to upgrade from version 14 to 16, you will have to upgrade from version 14 to 15, then from 15 to 16.</p><p>Since all data is stored in the <code>/config</code> and <code>/data</code> volumes, nothing gets lost. The startup script will check for the version in your volume and the installed docker version. If it finds a mismatch, it automatically starts the upgrade process.</p><h3 id=cant-start-nextcloud>Can&rsquo;t start Nextcloud</h3><p>If after updating your container image you receive a message along these lines:</p><blockquote><p>Can&rsquo;t start Nextcloud because the version of the data (<code>#.#.#.#</code>) is more than one major version behind the docker image version (<code>#.#.#.#</code>) and upgrading more than one major version is not supported. Please run an image tagged for the major version <code>##</code> first."</p></blockquote><p>The version of Nextcloud that you have installed in your persistent <code>/config</code> volume will need to be updated using an older image before you can use the new image.</p><p>Major version images, to be used for upgrading:</p><table><thead><tr><th>Image/Tag</th><th>PHP</th></tr></thead><tbody><tr><td><code>lscr.io/linuxserver/nextcloud:version-26.0.2</code></td><td>8.2</td></tr><tr><td><code>lscr.io/linuxserver/nextcloud:version-25.0.4</code></td><td>8.1</td></tr><tr><td><code>lscr.io/linuxserver/nextcloud:version-24.0.12</code></td><td>8.1</td></tr><tr><td><code>lscr.io/linuxserver/nextcloud:version-23.0.4</code></td><td>7.4</td></tr><tr><td><code>lscr.io/linuxserver/nextcloud:version-22.2.3</code></td><td>7.4</td></tr><tr><td><code>lscr.io/linuxserver/nextcloud:version-21.0.3</code></td><td>7.4</td></tr><tr><td><code>lscr.io/linuxserver/nextcloud:version-20.0.7</code></td><td>7.4</td></tr></tbody></table><p>Package locked tags, listed for LSIO team reference:</p><table><thead><tr><th>Image/Tag</th><th>PHP</th><th>Notes</th></tr></thead><tbody><tr><td><code>lscr.io/linuxserver/nextcloud:26.0.2-ls245</code></td><td>8.1</td><td>Last tag with PHP 8.1</td></tr><tr><td><code>lscr.io/linuxserver/nextcloud:24.0.6-ls204</code></td><td>7.4</td><td>Last tag with PHP 7.4</td></tr></tbody></table><ul><li>Check your <code>/config/www/nextcloud/config/config.php</code> file or <code>/config/www/nextcloud/version.php</code> file to determine the version you have installed</li><li>Switch your image to the corresponding major version from the table above (ex: your files indicate <code>24.x.x</code>, use <code>lscr.io/linuxserver/nextcloud:version-24.0.12</code>) and start the container</li><li>Run <code>docker exec -it nextcloud updater.phar</code> <strong><em>repeatedly</em></strong> until you have updated to Nextcloud <code>27.x.x</code>, or the updater says <code>This version of Nextcloud is not compatible with > PHP x.x</code></li><li>Check your files again to determine the version you have installed<ul><li>If your installed version is below 26, repeat the steps above until you get to version 26</li><li>If your installed version is 26 or 27, continue with the instructions below</li></ul></li><li>Switch your image to <code>lscr.io/linuxserver/nextcloud:version-27.0.0</code> and start the container. Note the <code>updater.phar</code> is no longer available, or needed</li><li>Run <code>docker logs nextcloud</code> and check for any issues (report <a href=https://github.com/linuxserver/docker-nextcloud/issues>issues on GitHub</a>)</li><li>As of posting this information, Nextclouod 27 is the latest current version. If you are reading this after a new major version of Nextcloud beyond 27 is released, check <a href=https://github.com/linuxserver/docker-nextcloud/releases>releases on GitHub</a> and proceed to switch to the next major version tag one by one until you are current. Updating more than one major version at a time is not supported</li><li>You should now be able to switch your image to <code>lscr.io/linuxserver/nextcloud</code> (no tag) if you prefer to run the latest image (although we do recommend pinning a specific version)</li><li>Run <code>docker exec -it nextcloud mv /config/nginx/site-confs/default.conf /config/nginx/site-confs/default.conf.bak</code></li><li>Run <code>docker exec -it nextcloud mv /config/nginx/nginx.conf /config/nginx/nginx.conf.bak</code></li><li>Run <code>docker restart nextcloud</code></li><li>Nextcloud should now be in a working state</li></ul><p>Optional:</p><ul><li>If you had customized any of the nginx configs that were renamed above, compare the <code>.bak</code> file to the new live file and apply any customizations you require. Note the <code>root</code> line in <code>site-confs/default.conf</code> should be changed from <code>/config/www/nextcloud/</code> to <code>/app/www/public</code></li><li>Remove the <code>.bak</code> files</li></ul></div></div><div class=padding></div></div><div class="contain center"><p>Last updated:
August 3, 2023 at 1:29 PM</p></div><script type=text/javascript>console.log('cState v5.6.1 - https://github.com/cstate/cstate'),document.getElementsByTagName('html')[0].className='js',document.body.className==='change-header-color'&&(document.body.className==='status-down'?document.querySelector('meta[name=theme-color]').setAttribute('content',themeDownColor):document.body.className==='status-disrupted'?document.querySelector('meta[name=theme-color]').setAttribute('content',themeDisruptedColor):document.querySelector('meta[name=theme-color]').setAttribute('content',themeNoticeColor)),window.location.hash.match('access_token')&&(document.location.pathname='/admin'),window.location.hash.match('invite_token')&&(document.location.pathname='/admin'),window.location.hash.match('confirmation_token')&&(document.location.pathname='/admin'),window.location.hash.match('email_change_token')&&(document.location.pathname='/admin'),window.location.hash.match('recovery_token')&&(document.location.pathname='/admin');function toggleCategoryHead(e){e.parentNode.className=='category category--open category--titled'?e.parentNode.className='category category--closed category--titled':e.parentNode.className='category category--open category--titled'}function timeSince(n){var t=Math.floor((new Date-n)/1e3),e=Math.floor(t/31536e3);return e>1?e+' years':(e=Math.floor(t/2592e3),e>1?e+' months':(e=Math.floor(t/86400),e>1?e+'d':(e=Math.floor(t/3600),e>1?e+'h':(e=Math.floor(t/60),e>1?e+' min':Math.floor(t)<0?Math.floor(t):Math.floor(t)+'s'))))}function updateRelativeTimes(){for(var e,t,n,o=document.querySelectorAll('.relative-time'),s=0;s<o.length;s++)e=o[s],t=Date.parse(e.dataset.date),n=e.getAttribute('data-time-prefix')||'',t?timeSince(t)<0?n=e.innerText:n+=timeSince(t)+' ago':(t=e.innerText,e.setAttribute('title',t||new Date),n+='just now'),n+=e.getAttribute('data-time-suffix')||'',e.innerHTML=n.trim()}updateRelativeTimes(),setInterval(updateRelativeTimes,5e3)</script><div class=footer><div class=contain><p><strong class=bold>&copy; Info :: LinuxServer.io, 2024</strong>
&nbsp; • &nbsp; <a href=#>Back to top</a></p><p>LinuxServer.io Status page</p><small class="footer__copyright faded">Powered by <a href=https://github.com/cstate/cstate><b>cState</b></a></small><hr><p class=hinted><small>⚡
Subscribe via RSS —
<a href=https://info.linuxserver.io/index.xml class=no-underline>to all updates</a></small></p></div></div></body></html>