<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><link rel="alternate" type="text/html" href="https://info.linuxserver.io/"/><title>Mariadb on Info :: LinuxServer.io</title><link>https://info.linuxserver.io/affected/mariadb/</link><description>History</description><generator>github.com/cstate</generator><language>en</language><lastBuildDate>2023-05-29T12:00:00+00:00</lastBuildDate><updated>2023-05-29T12:00:00+00:00</updated><atom:link href="https://info.linuxserver.io/affected/mariadb/index.xml" rel="self" type="application/rss+xml"/><item><title>[Resolved] Known Issue: MariaDB Check and Repair</title><link>https://info.linuxserver.io/issues/2023-05-29-mariadb/</link><pubDate>Mon, 29 May 2023 12:00:00 +0000</pubDate><guid>https://info.linuxserver.io/issues/2023-05-29-mariadb/</guid><category>2023-09-06 21:00:00Z</category><description>&lt;p&gt;There is a known issue with MariaDB when updating the container image to a new version. If a database upgrade is required and user databases are not in a healthy state, then the MariaDB service may fail to start.&lt;/p&gt;
&lt;p&gt;MariaDB version updates (ex: &lt;code&gt;10.6.x&lt;/code&gt; to &lt;code&gt;10.11.x&lt;/code&gt;) can happen when updating the container image. Upgrading user databases is done manually by running a command.&lt;/p&gt;
&lt;h3 id="recovery-procedure"&gt;Recovery Procedure&lt;/h3&gt;
&lt;p&gt;If you have recently updated your container image and your container logs show repeating entries of:&lt;/p&gt;</description><content type="html">&lt;p&gt;There is a known issue with MariaDB when updating the container image to a new version. If a database upgrade is required and user databases are not in a healthy state, then the MariaDB service may fail to start.&lt;/p&gt;
&lt;p&gt;MariaDB version updates (ex: &lt;code&gt;10.6.x&lt;/code&gt; to &lt;code&gt;10.11.x&lt;/code&gt;) can happen when updating the container image. Upgrading user databases is done manually by running a command.&lt;/p&gt;
&lt;h3 id="recovery-procedure"&gt;Recovery Procedure&lt;/h3&gt;
&lt;p&gt;If you have recently updated your container image and your container logs show repeating entries of:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-log" data-lang="log"&gt;Caught SIGTERM signal!
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;Roll back the container image to a previous tag (ex: &lt;code&gt;lscr.io/linuxserver/mariadb:10.6.13&lt;/code&gt; assuming this was the version you were running when things were last working)&lt;/li&gt;
&lt;li&gt;Run the check, repair, analyze, and optimize commands, watch for any issues&lt;/li&gt;
&lt;li&gt;Update the container image to the new tag (ex: &lt;code&gt;lscr.io/linuxserver/mariadb:10.11.3&lt;/code&gt; or &lt;code&gt;lscr.io/linuxserver/mariadb:latest&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Run the upgrade command&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This should get MariaDB running again with your user databases in a healthy state.&lt;/p&gt;
&lt;h3 id="check-and-repair"&gt;Check and Repair&lt;/h3&gt;
&lt;p&gt;If user databases are not in a healthy state (sometimes caused by a failed upgrade), it may be remedied by running:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mariadb-check -u root -p&amp;lt;PASSWORD&amp;gt; -c -A &lt;span style="color:#75715e"&gt;# check all databases for errors&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mariadb-check -u root -p&amp;lt;PASSWORD&amp;gt; -r -A &lt;span style="color:#75715e"&gt;# repair all databases&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mariadb-check -u root -p&amp;lt;PASSWORD&amp;gt; -a -A &lt;span style="color:#75715e"&gt;# analyze all databases&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mariadb-check -u root -p&amp;lt;PASSWORD&amp;gt; -o -A &lt;span style="color:#75715e"&gt;# optimize all databases&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;After running the above commands, you may need to run the upgrade command again.&lt;/p&gt;
&lt;h3 id="upgrading"&gt;Upgrading&lt;/h3&gt;
&lt;p&gt;When this container initializes, if &lt;code&gt;MYSQL_ROOT_PASSWORD&lt;/code&gt; is set an upgrade check will run. If an upgrade is required the log will indicate the need stop any services that are accessing databases in this container, and then run the command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mariadb-upgrade -u root -p&amp;lt;PASSWORD&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="closing-notes"&gt;Closing Notes&lt;/h3&gt;
&lt;p&gt;If you are running MariaDB databases in production, we always recommend pinning the container image to a specific version tag, such as &lt;code&gt;lscr.io/linuxserver/mariadb:10.6.13-r0-ls97&lt;/code&gt;, and planning any upgrades so that you can test and monitor them.&lt;/p&gt;</content></item><item><title>mariadb change to Alpine</title><link>https://info.linuxserver.io/issues/2021-08-25-mariadb-alpine/</link><pubDate>Wed, 25 Aug 2021 00:00:00 +0000</pubDate><guid>https://info.linuxserver.io/issues/2021-08-25-mariadb-alpine/</guid><category/><description>&lt;p&gt;As &lt;a href="https://info.linuxserver.io/issues/2021-03-10-mariadb-alpine/"&gt;previously announced&lt;/a&gt; we have now moved the MariaDB &lt;code&gt;:alpine&lt;/code&gt; tag to &lt;code&gt;:latest&lt;/code&gt; and deprecated our Ubuntu-based image. No user action is required when updating to the new tag, but as ever we recommend ensuring you have a proven backup of your data before performing any updates. Going forward, the &lt;code&gt;:alpine&lt;/code&gt; tag will not receive any further updates.&lt;/p&gt;
&lt;p&gt;If for some reason you need to remain on the old version, you can pin your install to the &lt;code&gt;version-110.4.21mariabionic&lt;/code&gt; tag, although please be aware that no further updates will be provided for it.&lt;/p&gt;</description><content type="html">&lt;p&gt;As &lt;a href="https://info.linuxserver.io/issues/2021-03-10-mariadb-alpine/"&gt;previously announced&lt;/a&gt; we have now moved the MariaDB &lt;code&gt;:alpine&lt;/code&gt; tag to &lt;code&gt;:latest&lt;/code&gt; and deprecated our Ubuntu-based image. No user action is required when updating to the new tag, but as ever we recommend ensuring you have a proven backup of your data before performing any updates. Going forward, the &lt;code&gt;:alpine&lt;/code&gt; tag will not receive any further updates.&lt;/p&gt;
&lt;p&gt;If for some reason you need to remain on the old version, you can pin your install to the &lt;code&gt;version-110.4.21mariabionic&lt;/code&gt; tag, although please be aware that no further updates will be provided for it.&lt;/p&gt;</content></item><item><title>mariadb change to Alpine</title><link>https://info.linuxserver.io/issues/2021-03-10-mariadb-alpine/</link><pubDate>Wed, 10 Mar 2021 00:00:00 +0000</pubDate><guid>https://info.linuxserver.io/issues/2021-03-10-mariadb-alpine/</guid><category/><description>&lt;p&gt;We have created a new alpine based version of our mariadb container.
Our intent is to move &lt;code&gt;:alpine&lt;/code&gt; tag to &lt;code&gt;:latest&lt;/code&gt; once ready. Further info on the timeline will follow in the coming weeks.&lt;/p&gt;</description><content type="html">&lt;p&gt;We have created a new alpine based version of our mariadb container.
Our intent is to move &lt;code&gt;:alpine&lt;/code&gt; tag to &lt;code&gt;:latest&lt;/code&gt; once ready. Further info on the timeline will follow in the coming weeks.&lt;/p&gt;</content></item><item><title>New Container: Mariadb</title><link>https://info.linuxserver.io/issues/2015-08-12-mariadb/</link><pubDate>Wed, 12 Aug 2015 00:00:00 +0000</pubDate><guid>https://info.linuxserver.io/issues/2015-08-12-mariadb/</guid><category/><description>&lt;p&gt;We have released a new container for &lt;a href="https://github.com/linuxserver/docker-mariadb"&gt;Mariadb&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;&lt;a href="https://mariadb.org/"&gt;Mariadb&lt;/a&gt; is one of the most popular database servers. Made by the original developers of MySQL.&lt;/p&gt;</description><content type="html">&lt;p&gt;We have released a new container for &lt;a href="https://github.com/linuxserver/docker-mariadb"&gt;Mariadb&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;&lt;a href="https://mariadb.org/"&gt;Mariadb&lt;/a&gt; is one of the most popular database servers. Made by the original developers of MySQL.&lt;/p&gt;</content></item></channel></rss>